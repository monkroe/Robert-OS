<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ROBERT OS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body class="bg-black text-white font-['Inter'] pb-20 select-none">

    <header class="p-6 pb-2">
        <div class="flex justify-between items-start mb-4">
            <div>
                <h1 class="text-2xl font-[900] tracking-tighter italic text-white">ROBERT OS</h1>
                <div id="shift-status" class="mt-1">
                    </div>
            </div>
            <div id="top-bar-clocks"></div>
        </div>

        <div id="daily-goal-bar" class="mt-4 min-h-[40px]">
            </div>
    </header>

    <main class="px-6">
        
        <div class="text-center py-10 animate-fadeIn">
            <h2 id="shift-timer" class="text-7xl font-[900] tracking-tightest font-mono">00:00:00</h2>
        </div>

        <div id="live-shift-stats"></div>

        <div class="grid grid-cols-2 gap-4 mt-6">
            <button id="shift-btn" class="flex-1 py-4 bg-teal-500 text-black rounded-2xl font-bold shadow-lg active:scale-95 transition">
                Kraunama...
            </button>
            
            <button id="stop-btn" onclick="window.openEndModal()" class="py-4 bg-zinc-900 border border-zinc-800 rounded-2xl font-bold text-red-500 active:scale-95 transition">
                <span class="text-xl">üèÅ</span> STOP
            </button>
        </div>

        <div class="grid grid-cols-2 gap-4 mt-4">
            <button onclick="window.openTxModal('in')" class="p-4 bg-zinc-900 border border-zinc-800 rounded-2xl font-bold text-sm active:scale-95 transition">
                ‚ûï PAJAMOS
            </button>
            <button onclick="window.openTxModal('out')" class="p-4 bg-zinc-900 border border-zinc-800 rounded-2xl font-bold text-sm active:scale-95 transition">
                ‚ûñ I≈†LAIDOS
            </button>
        </div>

        <div class="mt-10">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xs font-black tracking-widest text-gray-500 uppercase">Istorija & Logbook</h3>
                <button onclick="window.exportAI()" class="text-[10px] font-bold text-teal-500 bg-teal-500/10 px-2 py-1 rounded">AI EXPORT</button>
            </div>
            <div id="audit-list">
                </div>
        </div>
    </main>

    <div id="start-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center p-4 z-[100] backdrop-blur-md">
        <div class="bg-zinc-900 border border-zinc-800 rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl">
            </div>
    </div>

    <div id="end-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center p-4 z-[100] backdrop-blur-md">
        <div class="bg-zinc-900 border border-zinc-800 rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl">
            </div>
    </div>

    <div id="tx-modal" class="fixed inset-0 bg-black/90 hidden flex items-center justify-center p-4 z-[100] backdrop-blur-md">
        <div class="bg-zinc-900 border border-zinc-800 rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl">
            <h3 id="tx-title" class="text-xl font-bold mb-4 uppercase tracking-tight">Tranzakcija</h3>
            
            <label class="block text-[10px] text-gray-500 font-bold mb-1 ml-1 uppercase">Suma ($)</label>
            <input type="number" id="tx-amount" class="w-full bg-black border border-zinc-800 rounded-2xl p-4 text-2xl font-mono mb-4 focus:border-teal-500 outline-none" placeholder="0.00">

            <div id="expense-types" class="flex gap-2 mb-4 overflow-x-auto pb-2">
                </div>

            <input type="hidden" id="tx-type">

            <div id="fuel-fields" class="hidden animate-fadeIn">
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <div>
                        <label class="block text-[10px] text-gray-500 font-bold mb-1">LITRAI</label>
                        <input type="number" id="tx-gal" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-sm">
                    </div>
                    <div>
                        <label class="block text-[10px] text-gray-500 font-bold mb-1">RIDA</label>
                        <input type="number" id="tx-odo" class="w-full bg-black border border-zinc-800 rounded-xl p-3 text-sm">
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-3 mt-6">
                <button onclick="document.getElementById('tx-modal').classList.add('hidden')" class="p-4 rounded-2xl font-bold bg-zinc-800 text-gray-400">AT≈†AUKTI</button>
                <button onclick="window.confirmTx()" class="p-4 rounded-2xl font-bold bg-teal-500 text-black">GERAI</button>
            </div>
        </div>
    </div>

    <div id="loading-overlay" class="fixed inset-0 bg-black/50 z-[200] hidden flex items-center justify-center backdrop-blur-sm">
        <div class="w-10 h-10 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"></div>
    </div>

    <script type="module" src="js/app.js"></script>

    <script>
        import('./js/modules/finance.js').then(m => {
            window.openTxModal = m.openTxModal;
            window.setExpType = m.setExpType;
            window.confirmTx = m.confirmTx;
            window.exportAI = m.exportAI;
        });
        import('./js/modules/shifts.js').then(m => {
            window.openEndModal = m.openEndModal;
        });
    </script>
</body>
</html>
